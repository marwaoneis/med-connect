"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Patient=require("../models/patient.model"),getAllPatients=function(e,t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Patient.find());case 3:r=e.sent,t.status(200).json(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.status(500).json({error:"Internal Server Error"});case 10:case"end":return e.stop()}},null,null,[[0,7]])},getPatient=function(t,r){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.params.id||r.status(400).json({error:"Bad Request, PatientId Id should be provided"}),e.next=4,regeneratorRuntime.awrap(Patient.findById(t.params.id));case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",r.status(404).json({error:"Patient not found"}));case 7:r.status(200).json(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),r.status(500).json({error:"Internal Server Error"});case 13:case"end":return e.stop()}},null,null,[[0,10]])},createPatient=function(t,r){var n,a,s,o,u,i,d,c,l,p,f;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.body,a=n.username,s=n.password,o=n.firstName,u=n.lastName,i=n.email,d=n.address,c=n.phone,l=n.dateOfBirth,p=n.gender,a&&s&&o&&u&&i&&d&&c&&l&&p){e.next=4;break}return e.abrupt("return",r.status(400).json({error:"All required parameters must be provided"}));case 4:return f=new Patient(t.body),e.next=7,regeneratorRuntime.awrap(f.save());case 7:r.status(201).json(f),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),r.status(500).json({error:"Internal Server Error"});case 13:case"end":return e.stop()}},null,null,[[0,10]])},updatePatient=function(t,r){var n,a,s,o,u,i,d,c,l,p,f;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.body,a=n.username,s=n.password,o=n.firstName,u=n.lastName,i=n.email,d=n.address,c=n.phone,l=n.dateOfBirth,p=n.gender,a||s||o||u||i||d||c||l||p){e.next=4;break}return e.abrupt("return",r.status(400).json({error:"At least one field must be provided for update"}));case 4:return e.next=6,regeneratorRuntime.awrap(Patient.findByIdAndUpdate(t.params.id,t.body,{new:!0}));case 6:if(f=e.sent){e.next=9;break}return e.abrupt("return",r.status(404).json({error:"Patient not found"}));case 9:r.status(200).json(f),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r.status(500).json({error:"Internal Server Error"});case 15:case"end":return e.stop()}},null,null,[[0,12]])},deletePatient=function(t,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Patient.findByIdAndRemove(t.params.id));case 3:if(e.sent){e.next=6;break}return e.abrupt("return",r.status(404).json({error:"Patient not found"}));case 6:r.status(204).end(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r.status(500).json({error:"Internal Server Error"});case 12:case"end":return e.stop()}},null,null,[[0,9]])},insertAdditionalInfo=function(t,r){var n,a,s,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.body,a=n.key,s=n.value,a&&s){e.next=4;break}return e.abrupt("return",r.status(400).json({error:"Both key and value must be provided for insertion"}));case 4:return e.next=6,regeneratorRuntime.awrap(Patient.findByIdAndUpdate(t.params.id,{$set:_defineProperty({},"additionalInfo.".concat(a),s)},{new:!0}));case 6:if(o=e.sent){e.next=9;break}return e.abrupt("return",r.status(404).json({error:"Patient not found"}));case 9:r.status(200).json(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r.status(500).json({error:"Internal Server Error"});case 15:case"end":return e.stop()}},null,null,[[0,12]])},deleteAdditionalInfo=function(t,r){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.params.key){e.next=4;break}return e.abrupt("return",r.status(400).json({error:"Key must be provided for deletion"}));case 4:return e.next=6,regeneratorRuntime.awrap(Patient.findByIdAndUpdate(t.params.id,{$unset:_defineProperty({},"additionalInfo.".concat(n),1)},{new:!0}));case 6:if(a=e.sent){e.next=9;break}return e.abrupt("return",r.status(404).json({error:"Patient not found"}));case 9:r.status(200).json(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r.status(500).json({error:"Internal Server Error"});case 15:case"end":return e.stop()}},null,null,[[0,12]])};module.exports={getAllPatients:getAllPatients,getPatient:getPatient,createPatient:createPatient,updatePatient:updatePatient,deletePatient:deletePatient,insertAdditionalInfo:insertAdditionalInfo,deleteAdditionalInfo:deleteAdditionalInfo};
//# sourceMappingURL=patient.controller.min.js.map
