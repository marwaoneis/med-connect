{"version":3,"sources":["patient.model.js"],"names":["mongoose","require","validator","Schema","username","bcrypt","String","required","patientSchema","type","minlength","maxlength","trim","unique","email","isEmail","validate","address","phone","dateOfBirth","Date","gender","of","pre","next","salt","regeneratorRuntime","async","_context","prev","awrap","genSalt","sent","hash","this","password","t0","console","log","stop","timestamps","module","exports","model"],"mappings":"aAAA,IAAMA,SAAWC,QAAQ,YACnBC,UAAYD,QAAQ,aADpBD,OAAWC,QAAQ,UACnBC,cAAYD,IAAQD,SAADG,OAAzB,CAIEC,SAAU,CAHNC,KAAMC,OAKRC,UAAU,EAHRC,QAAAA,EACJJ,UAAU,EACRK,UAAMH,GACNC,MAAAA,GAEAG,SAAAA,CACAC,KAAAA,OACAC,UAAM,EAPgCF,UAAA,GAUtCD,UAAMH,CACNC,KAAAA,OACAG,UAAS,EAZ6BA,UAAA,GAetCD,SAAMH,CACNC,KAAAA,OACAG,UAAS,EAjB6BA,UAAA,GAoBtCD,MAAI,CACJF,KAAAA,OACAG,UAAS,EAtB6BG,QAAA,EAwBxCC,SAAO,CAAAZ,UAAAa,QAAA,iCAELR,QAAAA,CACAM,KAAMP,OACNU,UAAU,GAEZC,MAAO,CACLR,KAAMH,OACNC,UAAU,GAEZW,YAAO,CACLT,KAAMH,KACNC,UAAU,GAEZY,OAAAA,CACEV,KAAMW,OACNb,KAAAA,CAAAA,SAAU,SAEZc,eAAQ,CACNZ,KAAMH,IACNgB,GAAAhB,UAIAgB,cAFcC,IAOhB,OAPgB,SAAAC,GAAA,IAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAJ,MAAA,KAAA,EAAA,OAAAI,EAAAC,KAAA,EAAAD,EAAAJ,KAAA,EAAAE,mBAAAI,MAMlBzB,OAEE0B,QAAA,KARgB,KAAA,EAAA,OAMlBvB,EANkBoB,EAAAI,KAAAJ,EAAAJ,KAAA,EAAAE,mBAAAI,MAQhBzB,OAAA4B,KAAAC,KAAAC,SAAAV,IARgB,KAAA,EAQhBS,KAAAC,SARgBP,EAAAI,KAQhBR,IARgBI,EAAAJ,KAAA,GAAA,MAAA,KAAA,GAAAI,EAAAC,KAAA,GAAAD,EAAAQ,GAAAR,EAAA,MAAA,GAQhBS,QAAAC,IAAAV,EAAAQ,IAAAZ,EAAAI,EAAAQ,IARgB,KAAA,GAAA,IAAA,MAAA,OAAAR,EAAAW,SAAA,KAAAL,KAAA,CAAA,CAAA,EAAA,OAQhB,CAWEM,YAAY,IAXdC,OAAAC,QAAA1C,SAAA2C,MAAA,UAG0BtC","file":"patient.model.min.js","sourcesContent":["const mongoose = require(\"mongoose\");\nconst validator = require(\"validator\");\nconst bcrypt = require(\"bcrypt\");\n\nconst patientSchema = new mongoose.Schema({\n  username: {\n    type: String,\n    required: true,\n    unique: true,\n    minlength: 3,\n    maxlength: 30,\n    trim: true,\n  },\n  password: {\n    type: String,\n    required: true,\n    minlength: 6,\n  },\n  firstName: {\n    type: String,\n    required: true,\n    minlength: 2,\n  },\n  lastName: {\n    type: String,\n    required: true,\n    minlength: 2,\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true,\n    validate: [validator.isEmail, \"Please provide a valid email\"],\n  },\n  address: {\n    type: String,\n    required: true,\n  },\n  phone: {\n    type: String,\n    required: true,\n  },\n  dateOfBirth: {\n    type: Date,\n    required: true,\n  },\n  gender: {\n    type: String,\n    enum: [\"Female\", \"Male\"],\n  },\n  additionalInfo: {\n    type: Map,\n    of: String, // or mongoose.Schema.Types.Mixed if the structure is not consistent\n  },\n});\n\npatientSchema.pre(\n  \"save\",\n  async function (next) {\n    try {\n      const salt = await bcrypt.genSalt(10);\n      this.password = await bcrypt.hash(this.password, salt);\n      next();\n    } catch (error) {\n      console.log(error);\n      next(error);\n    }\n  },\n  {\n    timestamps: true,\n  }\n);\n\nmodule.exports = mongoose.model(\"Patient\", patientSchema);\n"]}