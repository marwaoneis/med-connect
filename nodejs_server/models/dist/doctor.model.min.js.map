{"version":3,"sources":["doctor.model.js"],"names":["mongoose","require","validator","Schema","username","bcrypt","String","required","doctorSchema","type","minlength","maxlength","trim","unique","email","isEmail","validate","address","phone","gender","specialization","yearsOfExperience","Number","appointmentPrice","startTime","endTime","default","pre","next","salt","regeneratorRuntime","async","_context","prev","abrupt","awrap","genSalt","sent","isModified","hash","this","password","t0","console","log","stop","timestamps","module","exports","model"],"mappings":"aAAA,IAAMA,SAAWC,QAAQ,YACnBC,UAAYD,QAAQ,aADpBD,OAAWC,QAAQ,UACnBC,aAAYD,IAAQD,SAAAG,OAA1B,CAIEC,SAAU,CAHNC,KAAMC,OAKRC,UAAU,EAHRC,QAAAA,EACJJ,UAAU,EACRK,UAAMH,GACNC,MAAAA,GAEAG,SAAAA,CACAC,KAAAA,OACAC,UAAM,EAP+BF,UAAA,GAUrCD,UAAMH,CACNC,KAAAA,OACAG,UAAS,EAZ4BA,UAAA,GAerCD,SAAMH,CACNC,KAAAA,OACAG,UAAS,EAjB4BA,UAAA,GAoBrCD,MAAI,CACJF,KAAAA,OACAG,UAAS,EAtB4BG,QAAA,EAwBvCC,SAAO,CAAAZ,UAAAa,QAAA,iCAELR,QAAAA,CACAM,KAAMP,OACNU,UAAU,GAEZC,MAAO,CACLR,KAAMH,OACNC,UAAU,GAEZW,OAAO,CACLT,KAAMH,OACNC,KAAAA,CAAAA,SAAU,SAEZY,eAAQ,CACNV,KAAMH,OACNC,UAAO,GAETa,kBAAgB,CACdX,KAAMH,OACNC,UAAU,GAEZc,iBAAiB,CACfZ,KAAMa,OACNf,UAAU,GAEZgB,OAAAA,CACEd,UAAMa,CACNf,KAAQD,OApD6BC,UAAA,GAuDrCiB,QAAS,CACPf,KAAMH,OACNC,UAAU,GAEZkB,gBAAS,CACPhB,KAAMH,OACNC,UAAU,IAGVE,KAAAA,CACAF,KAAAA,OAFemB,QAAA,YAOjBlB,aAAAmB,IAFI,OApER,SAAAC,GAAA,IAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAJ,MAAA,KAAA,EAAA,GA0EApB,KAAamB,WAEX,YA5EF,CAAAK,EAAAJ,KAAA,EAAA,MAAA,OAAAI,EAAAE,OAAA,SA4EEN,KA5EF,KAAA,EAAA,OAAAI,EAAAC,KAAA,EAAAD,EAAAJ,KAAA,EAAAE,mBAAAK,MA4EE9B,OAAA+B,QAAA,KA5EF,KAAA,EAAA,OA4EEP,EA5EFG,EAAAK,KAAAL,EAAAJ,KAAA,EAAAE,mBAAAK,MA6EcG,OAAWC,KAAhBC,KADPC,SAAAZ,IA5EF,KAAA,EA4EEW,KAAAC,SA5EFT,EAAAK,KA4EET,IA5EFI,EAAAJ,KAAA,GAAA,MAAA,KAAA,GAAAI,EAAAC,KAAA,GAAAD,EAAAU,GAAAV,EAAA,MAAA,GA4EEW,QAAAC,IAAAZ,EAAAU,IAWId,EAAII,EAAAU,IAvFV,KAAA,GAAA,IAAA,MAAA,OAAAV,EAAAa,SAAA,KAAAL,KAAA,CAAA,CAAA,EAAA,OA4EE,CAAAM,YAAA,IAAAC,OAAAC,QAAAhD,SAAAiD,MAAA,SAAAzC","file":"doctor.model.min.js","sourcesContent":["const mongoose = require(\"mongoose\");\nconst validator = require(\"validator\");\nconst bcrypt = require(\"bcrypt\");\n\nconst doctorSchema = new mongoose.Schema({\n  username: {\n    type: String,\n    required: true,\n    unique: true,\n    minlength: 3,\n    maxlength: 30,\n    trim: true,\n  },\n  password: {\n    type: String,\n    required: true,\n    minlength: 6,\n  },\n  firstName: {\n    type: String,\n    required: true,\n    minlength: 2,\n  },\n  lastName: {\n    type: String,\n    required: true,\n    minlength: 2,\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true,\n    validate: [validator.isEmail, \"Please provide a valid email\"],\n  },\n  address: {\n    type: String,\n    required: true,\n  },\n  phone: {\n    type: String,\n    required: true,\n  },\n  gender: {\n    type: String,\n    enum: [\"Female\", \"Male\"],\n  },\n  specialization: {\n    type: String,\n    required: true,\n  },\n  yearsOfExperience: {\n    type: Number,\n    required: true,\n  },\n  appointmentPrice: {\n    type: Number,\n    required: true,\n  },\n  timing: {\n    startTime: {\n      type: String,\n      required: true,\n    },\n    endTime: {\n      type: String,\n      required: true,\n    },\n    daysOfOperation: {\n      type: String,\n      required: true,\n    },\n  },\n  role: {\n    type: String,\n    default: \"Doctor\",\n  },\n});\n\ndoctorSchema.pre(\n  \"save\",\n  async function (next) {\n    if (!this.isModified(\"password\")) {\n      return next();\n    }\n\n    try {\n      const salt = await bcrypt.genSalt(10);\n      this.password = await bcrypt.hash(this.password, salt);\n      next();\n    } catch (error) {\n      console.log(error);\n      next(error);\n    }\n  },\n  {\n    timestamps: true,\n  }\n);\n\nmodule.exports = mongoose.model(\"Doctor\", doctorSchema);\n"]}